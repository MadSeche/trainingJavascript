let Movie;_f02‍.x([["list",()=>list],["getById",()=>getById],["create",()=>create],["deleteOne",()=>deleteOne],["putOne",()=>putOne]]);_f02‍.w("./movie.model",[["Movie",["Movie"],function(v){Movie=v}]]);

       const list = async(req,res)=>{
    try{
        const movies = await Movie.find();
        // console.log(movies)
        if (!movies) return res.status(400).end()
        res.status(200).json({movies})
    } catch(err){
        _f02‍.g.console.log(err);
        res.status(400).end();
    }
}
       const getById = async(req,res)=>{
    try{
        const movie = await Movie.findOne({_id:req.params.id});
        if (!movie) return res.status(400).end()
        res.status(200).json({movie})
    } catch(err){
        _f02‍.g.console.log(err);
        res.status(400).end();
    }
}
       const create = async (req,res)=>{
    try{
        const movie = await Movie.create({...req.body})
        res.status(201).json({movie})
    }catch(err){
        _f02‍.g.console.log(err);
        res.status(400).end()
    }
}
       const deleteOne = async(req,res)=>{
    try{
        const deleteMovie = await Movie.findOneAndDelete({
                _id:req.params.id // trouve moi l'id = à id que je te donne
            }
        )
        if(!deleteMovie) return res.status(400).end()
        res.status(200).json({movie:deleteMovie})
    }catch(err){
        _f02‍.g.console.log(err);
        res.status(400).end();
    }
}
       const putOne = async(req,res)=>{
    try{
        const putMovie = await Movie.findOneAndUpdate({
                _id:req.params.id // trouve moi l'id = à id que je te donne
            },
            req.body, // Met à jour
            {new:true} // écrase
        )
        if(!putMovie) return res.status(400).end()
        res.status(200).json({movie:putMovie})
    }catch(err){
        _f02‍.g.console.log(err);
        res.status(400).end();
    }
}